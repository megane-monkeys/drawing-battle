(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{116:function(e,t,n){e.exports=n(148)},121:function(e,t,n){},148:function(e,t,n){"use strict";n.r(t);var r,a=n(0),c=n.n(a),i=n(19),o=n.n(i),s=(n(121),n(13)),u=n(34),l=n(6),f=n(36),d=n(23);!function(e){e.FINISH="FINISH",e.INITIAL="INITIAL",e.ABORT="ABORT",e.RESETTING="RESETTING",e.WORKING="WORKING"}(r||(r={}));var m,b={state:r.INITIAL,startTime:(new Date).getTime(),milliseconds:0},p=Object(d.b)({name:"timer",initialState:b,reducers:{abortTimer:function(e,t){e.state=r.ABORT},startTimer:function(e,t){e.startTime=(new Date).getTime(),e.state=r.WORKING},resetTimer:function(e,t){e.state=r.RESETTING,e.milliseconds=0},stopTimer:function(e,t){e.state=r.FINISH,e.milliseconds=(new Date).getTime()-e.startTime}}}),O=Object(f.a)({},p.actions),I=p.reducer;!function(e){e.INITIAL="INITIAL",e.FETCHING_ANSWERS="FETCHING_ANSWERS",e.PREDICTION="PREDICTION",e.FETCHING_PREDICTION="FETCHING_PREDICTION"}(m||(m={}));var h={answers:[],answer:"",prediction:"-",random:!0,status:m.INITIAL,strokes:[]},v=Object(d.b)({name:"prediciton",initialState:h,reducers:{initialize:function(e,t){e.status=m.INITIAL,e.prediction="-",e.strokes=[]},toggleRandom:function(e,t){e.random=!e.random},setAnswers:function(e,t){e.answers=t.payload},setAnswer:function(e,t){e.answer=t.payload,e.status=m.PREDICTION},setPrediction:function(e,t){e.prediction=t.payload,e.status=m.PREDICTION},fetchAnswers:function(e,t){e.status=m.FETCHING_ANSWERS},fetchPrediction:function(e,t){e.status=m.FETCHING_PREDICTION},pushStrokes:function(e,t){e.strokes.push(t.payload)}}}),w=Object(f.a)({},v.actions),T=v.reducer,g=Object(l.combineReducers)({timer:I,prediction:T}),j=n(71),E=n(20),N=n.n(E),x=n(15),A=function(e){return e.prediction},R=n(46),k=n.n(R),S="/api/v1/answers",C="/api/v1/predicts",y=N.a.mark(P),G=N.a.mark(D),W=function(){return k.a.get(S).then((function(e){return{data:e.data}})).catch((function(e){return{error:e}}))};function P(){var e,t,n,r,a;return N.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(x.b)(W);case 2:if(e=c.sent,t=e.data,n=e.error,!t){c.next=16;break}return c.next=8,Object(x.c)(w.setAnswers(t));case 8:return c.next=10,Object(x.d)(A);case 10:return r=c.sent,a=r.answers,c.next=14,Object(x.c)(w.setAnswer(a[0]));case 14:c.next=17;break;case 16:console.log(n);case 17:case"end":return c.stop()}}),y)}var F=function(e){return k.a.post(C,e).then((function(e){return{data:e.data}})).catch((function(e){return{error:e}}))};function D(){var e,t,n,r,a;return N.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(x.d)(A);case 2:return e=c.sent,t=e.strokes,c.next=6,Object(x.b)(F,t);case 6:if(n=c.sent,r=n.data,a=n.error,!r){c.next=14;break}return c.next=12,Object(x.c)(w.setPrediction(r.label));case 12:c.next=15;break;case 14:console.log(a);case 15:case"end":return c.stop()}}),G)}var H=[Object(x.e)(w.fetchAnswers.toString(),P),Object(x.e)(w.fetchPrediction.toString(),D)],K=N.a.mark(L);function L(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(x.a)(Object(u.a)(H));case 2:case"end":return e.stop()}}),K)}var z=Object(j.a)(),B=[].concat(Object(u.a)(Object(d.c)()),[z]),_=Object(d.a)({reducer:g,middleware:B});z.run(L);var M=n(10),J=n(162),$=n(11),q=n(21),Q=function(e){return e.timer};function U(){var e=Object(M.a)(["\n  flex: 1;\n  height: 70vh;\n  width: 90%;\n  margin: auto;\n  position: relative;\n"]);return U=function(){return e},e}var V=function(){var e=Object(s.c)(Q).state,t=Object(s.c)(A),n=t.answer,i=t.prediction,o=X(),u=o.initialize,l=o.startTimer,f=o.fetchPrediction,d=o.stopTimer,m=o.pushStrokes,b=[];return Object(a.useEffect)((function(){var t,a=q.c().x((function(e){return e[0]})).y((function(e){return e[1]})).curve(q.a),c=q.b().on("start",(function(){e===r.WORKING&&(t=o.append("path").datum([]).attr("class","line").attr("stroke","#000").attr("stroke-width","5px").attr("fill","transparent"))})).on("drag",(function(){if(e===r.WORKING){var n=q.e("#canvas").node();n&&t&&(b.push(q.d(n).concat([(new Date).getTime()])),t.datum(b),t.attr("d",a))}})).on("end",(function(){e===r.WORKING&&(m(b),f(null),t=null,b=[])})),o=q.e("#canvas").style("width","100%").style("height","100%").style("border","solid 1px #707070").style("border-radius","5px").call(c);n===i&&e===r.WORKING&&d(null),e===r.RESETTING&&(u(null),q.f("path.line").remove(),b=[],l(null))}),[b]),c.a.createElement(Y,null,c.a.createElement("svg",{id:"canvas"}))},X=function(){var e=Object(s.b)();return Object(a.useMemo)((function(){return Object(l.bindActionCreators)({startTimer:O.startTimer,stopTimer:O.stopTimer,fetchPrediction:w.fetchPrediction,initialize:w.initialize,pushStrokes:w.pushStrokes},e)}),[e])},Y=Object($.a)(J.a)(U()),Z=n(70);function ee(){var e=Object(M.a)(['\n  left: 25%;\n  cursor: pointer;\n  border-width: 0;\n  padding: 5px;\n  margin: 5px;\n  font-family: "NotoSansCJKjp", monospace;\n  font-size: 20px;\n  border-radius: 5px;\n  width: 50%;\n  color: white;\n  background: ',";\n  transition: background 0.5s;\n  ",";\n"]);return ee=function(){return e},e}var te=$.a.button(ee(),(function(e){return"secondary"===e.color?"yellowgreen":"deeppink"}),(function(e){return e.style})),ne=function(e){var t=Object(Z.a)({},e);return c.a.createElement(te,t)},re=n(163);function ae(){var e=Object(M.a)(["\n  flex: 1;\n  width: 100%;\n  margin: auto;\n  position: relative;\n"]);return ae=function(){return e},e}var ce=function(){var e=Object(s.c)(A),t=e.answers,n=e.answer,r=e.random,i=ie(),o=i.fetchAnswers,u=i.setAnswer,l=i.toggleRandom;return Object(a.useEffect)((function(){0===t.length&&o(null)})),c.a.createElement(oe,null,"\u30e9\u30f3\u30c0\u30e0",c.a.createElement(re.a,{checked:!r,onChange:function(){return l(null)},color:"default"}),"\u9078\u629e",c.a.createElement("select",{disabled:r,onChange:function(e){u(e.target.value)},value:n},t.map((function(e,t){return c.a.createElement("option",{value:e},t+1,": ",e)}))))},ie=function(){var e=Object(s.b)();return Object(a.useMemo)((function(){return Object(l.bindActionCreators)({fetchAnswers:w.fetchAnswers,setAnswer:w.setAnswer,toggleRandom:w.toggleRandom},e)}),[e])},oe=Object($.a)(J.a)(ae());function se(){var e=Object(M.a)(["\n  margin: auto;\n"]);return se=function(){return e},e}function ue(){var e=Object(M.a)(["\n  margin: auto;\n"]);return ue=function(){return e},e}function le(){var e=Object(M.a)(["\n  position: absolute;\n  pointer-events: none;\n  z-index: 1;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin: auto;\n  height: 20%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n  background: blue;\n  font-size: 40px;\n  font-weight: bold;\n  opacity: 0.7;\n"]);return le=function(){return e},e}function fe(){var e=Object(M.a)(["\n    display: flex;\n    height: 40px;\n    margin: 0 30px;\n"]);return fe=function(){return e},e}function de(){var e=Object(M.a)(["\n    text-align: center;\n"]);return de=function(){return e},e}var me=function(){var e=Object(s.c)(Q),t=e.state,n=e.milliseconds,a=Object(s.c)(A),i=a.answer,o=a.prediction,u=a.answers,l=a.random,f=be(),d=f.setAnswer,m=f.resetTimer,b=f.abortTimer,p=function(){l&&d(u[Math.floor(Math.random()*u.length)]),m(null)};return c.a.createElement(pe,{className:"Header"},c.a.createElement(ve,null,"\u304a\u984c \u300c",l&&t!==r.WORKING?"???":i,"\u300d"),c.a.createElement(Oe,null,t===r.WORKING&&c.a.createElement(he,null,"AI\u5224\u5b9a\u2192 ",o," ?"),t!==r.WORKING&&c.a.createElement(ce,null)),t===r.INITIAL&&c.a.createElement(ne,{onClick:p},"\u30b9\u30bf\u30fc\u30c8"),t===r.WORKING&&c.a.createElement(ne,{onClick:function(){return b(null)},color:"secondary"},"\u30ae\u30d6\u30a2\u30c3\u30d7"),(t===r.FINISH||t===r.ABORT)&&c.a.createElement(ne,{onClick:p},"\u3082\u3046\u4e00\u56de"),t===r.FINISH&&c.a.createElement(Ie,null,"\u8a18\u9332: ",(n/1e3).toFixed(2),"\u79d2"))},be=function(){var e=Object(s.b)();return Object(a.useMemo)((function(){return Object(l.bindActionCreators)({resetTimer:O.resetTimer,abortTimer:O.abortTimer,setAnswer:w.setAnswer},e)}),[e])},pe=$.a.div(de()),Oe=$.a.div(fe()),Ie=Object($.a)(J.a)(le()),he=Object($.a)(J.a)(ue()),ve=$.a.h2(se());function we(){var e=Object(M.a)(["\n    text-align: right;\n    margin: 10px;\n"]);return we=function(){return e},e}var Te=function(){return c.a.createElement("div",{className:"Footer"},c.a.createElement(ge,null,"Drawing Race, 2019 megane-monkeys"))},ge=$.a.p(we()),je=function(){return c.a.createElement(s.a,{store:_},c.a.createElement("div",{className:"App"},c.a.createElement(me,null),c.a.createElement(V,null),c.a.createElement(Te,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(je,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[116,1,2]]]);
//# sourceMappingURL=main.3256589b.chunk.js.map