(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{116:function(e,t,n){e.exports=n(148)},121:function(e,t,n){},148:function(e,t,n){"use strict";n.r(t);var r,a=n(0),c=n.n(a),i=n(19),o=n.n(i),u=(n(121),n(11)),s=n(34),l=n(6),f=n(36),d=n(23);!function(e){e.FINISH="FINISH",e.INITIAL="INITIAL",e.ABORT="ABORT",e.RESETTING="RESETTING",e.WORKING="WORKING"}(r||(r={}));var m,b={state:r.INITIAL,startTime:(new Date).getTime(),milliseconds:0},p=Object(d.b)({name:"timer",initialState:b,reducers:{abortTimer:function(e,t){e.state=r.ABORT},startTimer:function(e,t){e.startTime=(new Date).getTime(),e.state=r.WORKING},resetTimer:function(e,t){e.state=r.RESETTING,e.milliseconds=0},stopTimer:function(e,t){e.state=r.FINISH},updateTimer:function(e,t){e.milliseconds=(new Date).getTime()-e.startTime}}}),O=Object(f.a)({},p.actions),I=p.reducer;!function(e){e.INITIAL="INITIAL",e.FETCHING_ANSWERS="FETCHING_ANSWERS",e.PREDICTION="PREDICTION",e.FETCHING_PREDICTION="FETCHING_PREDICTION"}(m||(m={}));var h={answers:[],answer:"",prediction:"-",random:!0,status:m.INITIAL,strokes:[]},v=Object(d.b)({name:"prediciton",initialState:h,reducers:{initialize:function(e,t){e.status=m.INITIAL,e.prediction="-",e.strokes=[]},toggleRandom:function(e,t){e.random=!e.random},setAnswers:function(e,t){e.answers=t.payload},setAnswer:function(e,t){e.answer=t.payload,e.status=m.PREDICTION},setPrediction:function(e,t){e.prediction=t.payload,e.status=m.PREDICTION},fetchAnswers:function(e,t){e.status=m.FETCHING_ANSWERS},fetchPrediction:function(e,t){e.status=m.FETCHING_PREDICTION},pushStrokes:function(e,t){e.strokes.push(t.payload)}}}),T=Object(f.a)({},v.actions),j=v.reducer,w=Object(l.combineReducers)({timer:I,prediction:j}),g=n(71),E=n(20),N=n.n(E),x=n(15),A=function(e){return e.prediction},R=n(47),k=n.n(R),S="/api/v1/answers",C="/api/v1/predicts",y=N.a.mark(P),G=N.a.mark(D),F=function(){return k.a.get(S).then((function(e){return{data:e.data}})).catch((function(e){return{error:e}}))};function P(){var e,t,n,r,a;return N.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(x.b)(F);case 2:if(e=c.sent,t=e.data,n=e.error,!t){c.next=16;break}return c.next=8,Object(x.c)(T.setAnswers(t));case 8:return c.next=10,Object(x.d)(A);case 10:return r=c.sent,a=r.answers,c.next=14,Object(x.c)(T.setAnswer(a[0]));case 14:c.next=17;break;case 16:console.log(n);case 17:case"end":return c.stop()}}),y)}var W=function(e){return k.a.post(C,e).then((function(e){return{data:e.data}})).catch((function(e){return{error:e}}))};function D(){var e,t,n,r,a;return N.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(x.d)(A);case 2:return e=c.sent,t=e.strokes,c.next=6,Object(x.b)(W,t);case 6:if(n=c.sent,r=n.data,a=n.error,!r){c.next=14;break}return c.next=12,Object(x.c)(T.setPrediction(r.label));case 12:c.next=15;break;case 14:console.log(a);case 15:case"end":return c.stop()}}),G)}var H=[Object(x.e)(T.fetchAnswers.toString(),P),Object(x.e)(T.fetchPrediction.toString(),D)],K=N.a.mark(L);function L(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(x.a)(Object(s.a)(H));case 2:case"end":return e.stop()}}),K)}var z=Object(g.a)(),B=[].concat(Object(s.a)(Object(d.c)()),[z]),M=Object(d.a)({reducer:w,middleware:B});z.run(L);var _=n(9),J=n(162),$=n(10),q=n(21),Q=function(e){return e.timer};function U(){var e=Object(_.a)(["\n  flex: 1;\n  height: 70vh;\n  width: 90%;\n  margin: auto;\n  position: relative;\n"]);return U=function(){return e},e}var V=function(){var e=Object(u.c)(Q).state,t=Object(u.c)(A),n=t.answer,i=t.prediction,o=X(),s=o.initialize,l=o.startTimer,f=o.fetchPrediction,d=o.stopTimer,m=o.pushStrokes,b=[];return Object(a.useEffect)((function(){var t,a=q.c().x((function(e){return e[0]})).y((function(e){return e[1]})).curve(q.a),c=q.b().on("start",(function(){t=o.append("path").datum([]).attr("class","line").attr("stroke","#000").attr("stroke-width","5px").attr("fill","transparent")})).on("drag",(function(){var e=q.e("#canvas").node();e&&t&&(b.push(q.d(e).concat([(new Date).getTime()])),t.datum(b),t.attr("d",a))})).on("end",(function(){m(b),f(null),t=null,b=[]})),o=q.e("#canvas").style("width","100%").style("height","100%").style("border","solid 1px #707070").style("border-radius","5px").call(c);n===i&&d(null),e===r.RESETTING&&(s(null),q.f("path.line").remove(),b=[],l(null))}),[b]),c.a.createElement(Y,null,c.a.createElement("svg",{id:"canvas"}))},X=function(){var e=Object(u.b)();return Object(a.useMemo)((function(){return Object(l.bindActionCreators)({startTimer:O.startTimer,stopTimer:O.stopTimer,fetchPrediction:T.fetchPrediction,initialize:T.initialize,pushStrokes:T.pushStrokes},e)}),[e])},Y=Object($.a)(J.a)(U());function Z(){var e=Object(_.a)(["\n  flex: 1;\n  width: 100%;\n  margin: auto;\n  position: relative;\n"]);return Z=function(){return e},e}var ee=function(){var e=Object(u.c)(Q),t=te().updateTimer;return Object(a.useEffect)((function(){e.state===r.WORKING&&setTimeout((function(){t(null)}),100)})),c.a.createElement(ne,null,c.a.createElement("span",null,(e.milliseconds/1e3).toFixed(2)," \u79d2"))},te=function(){var e=Object(u.b)();return Object(a.useMemo)((function(){return Object(l.bindActionCreators)({updateTimer:O.updateTimer},e)}),[e])},ne=Object($.a)(J.a)(Z()),re=n(70);function ae(){var e=Object(_.a)(['\n  left: 25%;\n  cursor: pointer;\n  border-width: 0;\n  padding: 5px;\n  margin: 5px;\n  font-family: "NotoSansCJKjp", monospace;\n  font-size: 20px;\n  border-radius: 5px;\n  width: 50%;\n  color: white;\n  background: ',";\n  transition: background 0.5s;\n  ",";\n"]);return ae=function(){return e},e}var ce=$.a.button(ae(),(function(e){return"secondary"===e.color?"yellowgreen":"deeppink"}),(function(e){return e.style})),ie=function(e){var t=Object(re.a)({},e);return c.a.createElement(ce,t)},oe=n(163);function ue(){var e=Object(_.a)(["\n  flex: 1;\n  width: 100%;\n  margin: auto;\n  position: relative;\n"]);return ue=function(){return e},e}var se=function(){var e=Object(u.c)(A),t=e.answers,n=e.answer,r=e.random,i=le(),o=i.fetchAnswers,s=i.setAnswer,l=i.toggleRandom;return Object(a.useEffect)((function(){0===t.length&&o(null)}),[]),c.a.createElement(fe,null,"\u51fa\u984c:"," ","\u30e9\u30f3\u30c0\u30e0",c.a.createElement(oe.a,{checked:!r,onChange:function(){return l(null)},color:"default"}),"\u9078\u629e",c.a.createElement("select",{disabled:r,onChange:function(e){s(e.target.value)},value:n},t.map((function(e,t){return c.a.createElement("option",{value:e},t+1,": ",e)}))))},le=function(){var e=Object(u.b)();return Object(a.useMemo)((function(){return Object(l.bindActionCreators)({fetchAnswers:T.fetchAnswers,setAnswer:T.setAnswer,toggleRandom:T.toggleRandom},e)}),[e])},fe=Object($.a)(J.a)(ue());function de(){var e=Object(_.a)(["\n  margin: auto;\n"]);return de=function(){return e},e}function me(){var e=Object(_.a)(["\n  margin: auto;\n"]);return me=function(){return e},e}function be(){var e=Object(_.a)(["\n  position: absolute;\n  pointer-events: none;\n  z-index: 1;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin: auto;\n  height: 20%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n  background: blue;\n  font-size: 40px;\n  font-weight: bold;\n  opacity: 0.7;\n"]);return be=function(){return e},e}function pe(){var e=Object(_.a)(["\n    display: flex;\n    text-align: right;\n    height: 40px;\n    margin: 0 30px;\n"]);return pe=function(){return e},e}function Oe(){var e=Object(_.a)(["\n    text-align: center;\n"]);return Oe=function(){return e},e}var Ie=function(){var e=Object(u.c)(Q),t=e.state,n=e.milliseconds,a=Object(u.c)(A),i=a.answer,o=a.prediction,s=a.answers,l=a.random,f=he(),d=f.setAnswer,m=f.resetTimer,b=f.abortTimer,p=function(){l&&d(s[Math.floor(Math.random()*s.length)]),m(null)};return c.a.createElement(ve,{className:"Header"},c.a.createElement(ge,null,"\u304a\u984c \u300c",l&&t!==r.WORKING?"???":i,"\u300d"),c.a.createElement(Te,null,t===r.WORKING&&c.a.createElement(we,null,"AI\u5224\u5b9a\u2192 ",o," ?"),t===r.WORKING?c.a.createElement(ee,null):c.a.createElement(se,null)),t===r.INITIAL&&c.a.createElement(ie,{onClick:p},"\u30b9\u30bf\u30fc\u30c8"),t===r.WORKING&&c.a.createElement(ie,{onClick:function(){return b(null)},color:"secondary"},"\u30ae\u30d6\u30a2\u30c3\u30d7"),(t===r.FINISH||t===r.ABORT)&&c.a.createElement(ie,{onClick:p},"\u3082\u3046\u4e00\u56de"),t===r.FINISH&&c.a.createElement(je,null,"\u8a18\u9332: ",(n/1e3).toFixed(2),"\u79d2"))},he=function(){var e=Object(u.b)();return Object(a.useMemo)((function(){return Object(l.bindActionCreators)({resetTimer:O.resetTimer,abortTimer:O.abortTimer,setAnswer:T.setAnswer},e)}),[e])},ve=$.a.div(Oe()),Te=$.a.div(pe()),je=Object($.a)(J.a)(be()),we=Object($.a)(J.a)(me()),ge=$.a.h2(de());function Ee(){var e=Object(_.a)(["\n    text-align: right;\n    margin: 10px;\n"]);return Ee=function(){return e},e}var Ne=function(){return c.a.createElement("div",{className:"Footer"},c.a.createElement(xe,null,"Drawing Race, 2019 megane-monkeys"))},xe=$.a.p(Ee()),Ae=function(){return c.a.createElement(u.a,{store:M},c.a.createElement("div",{className:"App"},c.a.createElement(Ie,null),c.a.createElement(V,null),c.a.createElement(Ne,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(Ae,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[116,1,2]]]);
//# sourceMappingURL=main.ce11947b.chunk.js.map